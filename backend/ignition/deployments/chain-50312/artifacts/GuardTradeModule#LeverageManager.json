{
  "_format": "hh3-artifact-1",
  "contractName": "LeverageManager",
  "sourceName": "contracts/LeverageManager.sol",
  "abi": [
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_oracleAddress",
          "type": "address"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "inputs": [],
      "name": "ReentrancyGuardReentrantCall",
      "type": "error"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "positionId",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "address",
          "name": "owner",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "collateral",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "healthFactor",
          "type": "uint256"
        }
      ],
      "name": "PositionUpdate",
      "type": "event"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "_positionId",
          "type": "uint256"
        }
      ],
      "name": "getHealthFactor",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "nextPositionId",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "_collateral",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "_leverage",
          "type": "uint256"
        },
        {
          "internalType": "enum LeverageManager.PositionType",
          "name": "_positionType",
          "type": "uint8"
        }
      ],
      "name": "openPosition",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "name": "positions",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "id",
          "type": "uint256"
        },
        {
          "internalType": "address",
          "name": "owner",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "collateral",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "leverage",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "entryPrice",
          "type": "uint256"
        },
        {
          "internalType": "enum LeverageManager.PositionType",
          "name": "positionType",
          "type": "uint8"
        },
        {
          "internalType": "enum LeverageManager.PositionState",
          "name": "state",
          "type": "uint8"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "priceOracle",
      "outputs": [
        {
          "internalType": "contract MockPriceOracle",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "_positionId",
          "type": "uint256"
        }
      ],
      "name": "updatePosition",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "name": "userPositions",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    }
  ],
  "bytecode": "0x608060405234801561000f575f80fd5b50604051610a21380380610a2183398101604081905261002e91610057565b60015f81905580546001600160a01b0319166001600160a01b0392909216919091179055610084565b5f60208284031215610067575f80fd5b81516001600160a01b038116811461007d575f80fd5b9392505050565b610990806100915f395ff3fe608060405234801561000f575f80fd5b506004361061007a575f3560e01c80635e1b4d99116100585780635e1b4d99146100e45780635fbf81cc146100f7578063899346c71461010a57806399fbab8814610113575f80fd5b806309f1c80a1461007e57806317845c69146100935780632630c12f146100b9575b5f80fd5b61009161008c366004610736565b610181565b005b6100a66100a1366004610736565b61023a565b6040519081526020015b60405180910390f35b6001546100cc906001600160a01b031681565b6040516001600160a01b0390911681526020016100b0565b6100a66100f236600461074d565b61048b565b610091610105366004610782565b6104b6565b6100a660025481565b61016e610121366004610736565b600360208190525f918252604090912080546001820154600283015493830154600484015460059094015492946001600160a01b0390921693919290919060ff8082169161010090041687565b6040516100b097969594939291906107ee565b5f81815260036020526040902060018101546001600160a01b031633146101db5760405162461bcd60e51b81526020600482015260096024820152682737ba1037bbb732b960b91b60448201526064015b60405180910390fd5b5f6101e58361023a565b60028301546040805186815233602082015290810191909152606081018290529091507fefef63f4e369b1561821ccc6c5f33888a6c54f57b2ec87367e7be66140bc21939060800160405180910390a1505050565b5f81815260036020526040812060016005820154610100900460ff166001811115610267576102676107bb565b0361027457505f92915050565b60015460405163524f388960e01b815260206004820152600360248201526208aa8960eb1b60448201525f916001600160a01b03169063524f388990606401602060405180830381865afa1580156102ce573d5f803e3d5ffd5b505050506040513d601f19601f820116820180604052508101906102f29190610843565b905080158061030357506004820154155b156103195750670de0b6b3a76400009392505050565b5f80600584015460ff166001811115610334576103346107bb565b03610363578260030154836004015461034d9190610882565b836004015461035c9190610895565b9050610389565b826003015483600401546103779190610882565b836004015461038691906108ae565b90505b5f80600585015460ff1660018111156103a4576103a46107bb565b0361041857818310156103bc57505f95945050505050565b818460040154036103db575068056bc75e2d6310000095945050505050565b8184600401546103eb91906108c1565b6103f583856108c1565b61040790670de0b6b3a76400006108e7565b6104119190610916565b9050610482565b8183111561042b57505f95945050505050565b8360040154820361044a575068056bc75e2d6310000095945050505050565b600484015461045990836108c1565b61046384846108c1565b61047590670de0b6b3a76400006108e7565b61047f9190610916565b90505b95945050505050565b6004602052815f5260405f2081815481106104a4575f80fd5b905f5260205f20015f91509150505481565b6104be61070e565b60015460405163524f388960e01b815260206004820152600360248201526208aa8960eb1b60448201525f916001600160a01b03169063524f388990606401602060405180830381865afa158015610518573d5f803e3d5ffd5b505050506040513d601f19601f8201168201806040525081019061053c9190610843565b90505f811161057d5760405162461bcd60e51b815260206004820152600d60248201526c496e76616c696420707269636560981b60448201526064016101d2565b6002546040805160e081018252828152336020820152908101869052606081018590526080810183905260a081018460018111156105bd576105bd6107bb565b81525f602091820181905283815260038083526040918290208451815592840151600180850180546001600160a01b0319166001600160a01b03909316929092179091559184015160028401556060840151908301556080830151600483015560a08301516005830180549192909160ff1916908381811115610642576106426107bb565b021790555060c082015160058201805461ff00191661010083600181111561066c5761066c6107bb565b021790555050335f9081526004602090815260408220805460018101825590835290822001839055600280549250906106a483610942565b91905055505f6106b38261023a565b60408051848152336020820152908101889052606081018290529091507fefef63f4e369b1561821ccc6c5f33888a6c54f57b2ec87367e7be66140bc21939060800160405180910390a150505061070960015f55565b505050565b60025f540361073057604051633ee5aeb560e01b815260040160405180910390fd5b60025f55565b5f60208284031215610746575f80fd5b5035919050565b5f806040838503121561075e575f80fd5b82356001600160a01b0381168114610774575f80fd5b946020939093013593505050565b5f805f60608486031215610794575f80fd5b83359250602084013591506040840135600281106107b0575f80fd5b809150509250925092565b634e487b7160e01b5f52602160045260245ffd5b600281106107eb57634e487b7160e01b5f52602160045260245ffd5b50565b8781526001600160a01b038716602082015260408101869052606081018590526080810184905260e08101610822846107cf565b8360a0830152610831836107cf565b8260c083015298975050505050505050565b5f60208284031215610853575f80fd5b5051919050565b634e487b7160e01b5f52601260045260245ffd5b634e487b7160e01b5f52601160045260245ffd5b5f826108905761089061085a565b500490565b818103818111156108a8576108a861086e565b92915050565b808201808211156108a8576108a861086e565b8181035f8312801583831316838312821617156108e0576108e061086e565b5092915050565b8082025f8212600160ff1b841416156109025761090261086e565b81810583148215176108a8576108a861086e565b5f826109245761092461085a565b600160ff1b82145f198414161561093d5761093d61086e565b500590565b5f600182016109535761095361086e565b506001019056fea26469706673582212203d73506a5ee83d1d93abd0b3e3d9de8f3c983bce26206f8ce80203d3fa871cfc64736f6c63430008140033",
  "deployedBytecode": "0x608060405234801561000f575f80fd5b506004361061007a575f3560e01c80635e1b4d99116100585780635e1b4d99146100e45780635fbf81cc146100f7578063899346c71461010a57806399fbab8814610113575f80fd5b806309f1c80a1461007e57806317845c69146100935780632630c12f146100b9575b5f80fd5b61009161008c366004610736565b610181565b005b6100a66100a1366004610736565b61023a565b6040519081526020015b60405180910390f35b6001546100cc906001600160a01b031681565b6040516001600160a01b0390911681526020016100b0565b6100a66100f236600461074d565b61048b565b610091610105366004610782565b6104b6565b6100a660025481565b61016e610121366004610736565b600360208190525f918252604090912080546001820154600283015493830154600484015460059094015492946001600160a01b0390921693919290919060ff8082169161010090041687565b6040516100b097969594939291906107ee565b5f81815260036020526040902060018101546001600160a01b031633146101db5760405162461bcd60e51b81526020600482015260096024820152682737ba1037bbb732b960b91b60448201526064015b60405180910390fd5b5f6101e58361023a565b60028301546040805186815233602082015290810191909152606081018290529091507fefef63f4e369b1561821ccc6c5f33888a6c54f57b2ec87367e7be66140bc21939060800160405180910390a1505050565b5f81815260036020526040812060016005820154610100900460ff166001811115610267576102676107bb565b0361027457505f92915050565b60015460405163524f388960e01b815260206004820152600360248201526208aa8960eb1b60448201525f916001600160a01b03169063524f388990606401602060405180830381865afa1580156102ce573d5f803e3d5ffd5b505050506040513d601f19601f820116820180604052508101906102f29190610843565b905080158061030357506004820154155b156103195750670de0b6b3a76400009392505050565b5f80600584015460ff166001811115610334576103346107bb565b03610363578260030154836004015461034d9190610882565b836004015461035c9190610895565b9050610389565b826003015483600401546103779190610882565b836004015461038691906108ae565b90505b5f80600585015460ff1660018111156103a4576103a46107bb565b0361041857818310156103bc57505f95945050505050565b818460040154036103db575068056bc75e2d6310000095945050505050565b8184600401546103eb91906108c1565b6103f583856108c1565b61040790670de0b6b3a76400006108e7565b6104119190610916565b9050610482565b8183111561042b57505f95945050505050565b8360040154820361044a575068056bc75e2d6310000095945050505050565b600484015461045990836108c1565b61046384846108c1565b61047590670de0b6b3a76400006108e7565b61047f9190610916565b90505b95945050505050565b6004602052815f5260405f2081815481106104a4575f80fd5b905f5260205f20015f91509150505481565b6104be61070e565b60015460405163524f388960e01b815260206004820152600360248201526208aa8960eb1b60448201525f916001600160a01b03169063524f388990606401602060405180830381865afa158015610518573d5f803e3d5ffd5b505050506040513d601f19601f8201168201806040525081019061053c9190610843565b90505f811161057d5760405162461bcd60e51b815260206004820152600d60248201526c496e76616c696420707269636560981b60448201526064016101d2565b6002546040805160e081018252828152336020820152908101869052606081018590526080810183905260a081018460018111156105bd576105bd6107bb565b81525f602091820181905283815260038083526040918290208451815592840151600180850180546001600160a01b0319166001600160a01b03909316929092179091559184015160028401556060840151908301556080830151600483015560a08301516005830180549192909160ff1916908381811115610642576106426107bb565b021790555060c082015160058201805461ff00191661010083600181111561066c5761066c6107bb565b021790555050335f9081526004602090815260408220805460018101825590835290822001839055600280549250906106a483610942565b91905055505f6106b38261023a565b60408051848152336020820152908101889052606081018290529091507fefef63f4e369b1561821ccc6c5f33888a6c54f57b2ec87367e7be66140bc21939060800160405180910390a150505061070960015f55565b505050565b60025f540361073057604051633ee5aeb560e01b815260040160405180910390fd5b60025f55565b5f60208284031215610746575f80fd5b5035919050565b5f806040838503121561075e575f80fd5b82356001600160a01b0381168114610774575f80fd5b946020939093013593505050565b5f805f60608486031215610794575f80fd5b83359250602084013591506040840135600281106107b0575f80fd5b809150509250925092565b634e487b7160e01b5f52602160045260245ffd5b600281106107eb57634e487b7160e01b5f52602160045260245ffd5b50565b8781526001600160a01b038716602082015260408101869052606081018590526080810184905260e08101610822846107cf565b8360a0830152610831836107cf565b8260c083015298975050505050505050565b5f60208284031215610853575f80fd5b5051919050565b634e487b7160e01b5f52601260045260245ffd5b634e487b7160e01b5f52601160045260245ffd5b5f826108905761089061085a565b500490565b818103818111156108a8576108a861086e565b92915050565b808201808211156108a8576108a861086e565b8181035f8312801583831316838312821617156108e0576108e061086e565b5092915050565b8082025f8212600160ff1b841416156109025761090261086e565b81810583148215176108a8576108a861086e565b5f826109245761092461085a565b600160ff1b82145f198414161561093d5761093d61086e565b500590565b5f600182016109535761095361086e565b506001019056fea26469706673582212203d73506a5ee83d1d93abd0b3e3d9de8f3c983bce26206f8ce80203d3fa871cfc64736f6c63430008140033",
  "linkReferences": {},
  "deployedLinkReferences": {},
  "immutableReferences": {},
  "inputSourceName": "project/contracts/LeverageManager.sol",
  "buildInfoId": "solc-0_8_20-ac424d0a56d31b3f437a4c25e45b9973ed069989"
}